<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="music">
	 	<select id="music.selectMusicBoardList" parameterType="hashmap" resultType="hashmap">
	 	<include refid="common.pagingPre"/>
 		<![CDATA[
 			SELECT
 				music_num,
 				music_title,
 				music_uploader,
 				music_readcnt,
 				header,
 				date
 			FROM
 				music
 			order by 1 desc
 		]]>
 		<include refid="common.pagingPost"/>
 	</select>
 	
 	<select id="music.selectMusicBoardDetail" parameterType="hashmap" resultType="hashmap">
 		<![CDATA[
 			SELECT
 				music_num,
 				music_title,
 				music_uploader,
 				music_readcnt,
 				header,
 				date
 			FROM
 				music
 			WHERE
 				music_num = #{MNUM}
 		]]>
 	</select>
 	
 	<select id="music.selectMusicContent" parameterType="hashmap" resultType="hashmap">
 		<![CDATA[
 			SELECT
 				music_num,
 				content
 			FROM
 				music_content
 			WHERE
 				music_num = #{MNUM}
 		]]>
 	</select>
 	
 	<select id="music.selectMusicIwritten" parameterType="String" resultType="first.dto.music.MusicDTO">
 		<![CDATA[
 			SELECT
 				music_num,
 				music_title,
 				music_uploader,
 				music_readcnt,
 				header,
 				date
 			FROM
 				 music
 			WHERE
 				music_uploader = #{userId}
 			order by 1 desc
 		]]>
 	</select>
 	
 	<select id="music.selectScraps" parameterType="String" resultType="first.dto.scraps.ScrapDTO">
 		<![CDATA[
 			SELECT
 				scrap_num,
 				scrap_user,
 				scrap_board,
 				scrap_article_num,
 				m.music_title as title,
 				m.date as date,
 				m.header as header
 			FROM m_scrap, music m
 			WHERE scrap_article_num = m.music_num 
 					AND
 							scrap_user = #{userId}
 			order by 1 desc
 		]]>
 	</select>
</mapper>